generator client {
  provider      = "prisma-client-js"
  output        = "../node_modules/.prisma/client"
  binaryTargets = ["native", "rhel-openssl-1.0.x", "linux-musl-arm64-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model admins {
  id         Int      @id @default(autoincrement())
  username   String   @unique
  password   String
  created_at DateTime @default(now())
}

model firmalar {
  id                     Int                 @id @default(autoincrement())
  firma_adi              String
  slug                   String              @unique
  profil_foto            String?
  vcard_dosya            String?
  yetkili_adi            String?
  yetkili_pozisyon       String?
  created_at             DateTime            @default(now())
  updated_at             DateTime            @default(now())
  goruntulenme           Int                 @default(0)
  katalog                String?
  firma_hakkinda         String?
  firma_hakkinda_baslik  String?             @default("Hakkımızda")
  firma_unvan            String?
  firma_vergi_no         String?
  vergi_dairesi          String?
  sektor_id              Int?
  kategori_id            Int?
  il_id                  Int?
  ilce_id                Int?
  onay                   Boolean             @default(false)
  tip                    String?
  firma_logo             String?
  template_id            Int                 @default(1)
  gradient_color         String?             @default("#D4AF37,#F7E98E,#B8860B")
  banka_hesaplari        BankaHesabi[]
  iletisim_bilgileri     IletisimBilgisi[]
  sosyal_medya_hesaplari SosyalMedyaHesabi[]
  il                     iller?              @relation(fields: [il_id], references: [id])
  ilce                   ilceler?            @relation(fields: [ilce_id], references: [id])
  kategori               kategoriler?        @relation(fields: [kategori_id], references: [id])
  sektor                 sektorler?          @relation(fields: [sektor_id], references: [id])

  @@index([created_at])
  @@index([goruntulenme])
  @@index([onay])
  @@index([sektor_id, kategori_id])
  @@index([firma_adi])
  @@index([il_id])
  @@index([ilce_id])
}

model IletisimBilgisi {
  id         Int      @id @default(autoincrement())
  firma_id   Int
  tip        String
  deger      String
  etiket     String?
  aktif      Boolean  @default(true)
  sira       Int      @default(0)
  created_at DateTime @default(now())
  firma      firmalar @relation(fields: [firma_id], references: [id], onDelete: Cascade)

  @@index([firma_id])
  @@index([tip])
  @@index([firma_id, tip])
  @@index([aktif])
  @@index([sira])
}

model SosyalMedyaHesabi {
  id         Int      @id @default(autoincrement())
  firma_id   Int
  platform   String
  url        String
  etiket     String?
  aktif      Boolean  @default(true)
  sira       Int      @default(0)
  created_at DateTime @default(now())
  firma      firmalar @relation(fields: [firma_id], references: [id], onDelete: Cascade)

  @@index([firma_id])
  @@index([platform])
  @@index([firma_id, platform])
  @@index([aktif])
  @@index([sira])
}

model BankaHesabi {
  id           Int               @id @default(autoincrement())
  firma_id     Int
  banka_adi    String
  banka_kodu   String?
  banka_logo   String?
  hesap_sahibi String
  aktif        Boolean           @default(true)
  sira         Int               @default(0)
  created_at   DateTime          @default(now())
  firma        firmalar          @relation(fields: [firma_id], references: [id], onDelete: Cascade)
  hesaplar     BankaHesapDetay[]

  @@index([firma_id])
  @@index([sira])
}

model BankaHesapDetay {
  id              Int         @id @default(autoincrement())
  banka_hesabi_id Int
  iban            String
  para_birimi     String      @default("TRY")
  hesap_turu      String?
  aktif           Boolean     @default(true)
  created_at      DateTime    @default(now())
  banka_hesabi    BankaHesabi @relation(fields: [banka_hesabi_id], references: [id], onDelete: Cascade)

  @@index([banka_hesabi_id])
  @@index([iban])
}

model Icon {
  id       Int    @id @default(autoincrement())
  name     String
  priority Int
}

model sektorler {
  id       Int        @id @default(autoincrement())
  ad       String
  firmalar firmalar[]
}

model kategoriler {
  id       Int        @id @default(autoincrement())
  ad       String
  firmalar firmalar[]
}

model iller {
  id       Int        @id @default(autoincrement())
  ad       String
  firmalar firmalar[]
  ilceler  ilceler[]
}

model ilceler {
  id       Int        @id @default(autoincrement())
  ad       String
  il_id    Int
  firmalar firmalar[]
  il       iller      @relation(fields: [il_id], references: [id])

  @@index([il_id])
}

